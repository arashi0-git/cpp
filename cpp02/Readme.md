# CPP02で学んだこと
## コピーコンストラクタとコピー演算子
## ☆コピーコンストラクタ
## * 宣言の形
```
クラス名(クラス名 const & other);
```
## * いつ呼ばれるか
### 1. 新しいオブジェクトを宣言と同時に、既存オブジェクトで初期化するとき
```
Fixed a;          // デフォルトコンストラクタ
Fixed b(a);       // コピーコンストラクタ
Fixed c = b;      // コピーコンストラクタ
```
### 2. 関数にオブジェクトを値渡しするときの引数コピー
```
void func(Fixed x);  // 呼び出し時にコピーコンストラクタ
func(a);
```
### 3. 関数にオブジェクトを値戻りするとき
* 何をする？
* other(元のオブジェクト)が持つメンバを、自分自身(this)へコピーする。
* メンバがポインタや動的リソースを持つ場合は、浅いコピー深いコピーの設計を自前で行う。<br>

##  ☆コピー代入演算子
* 宣言の形
```
クラス名 & operator=(クラス名 const & other);
```
## * いつ呼ばれるか
すでに作成済みのオブジェクトへ、別のオブジェクトの値を後から代入する時
```
Fixed a, b;
// …a, b を何らかの操作で初期化…
a = b;   // ここでコピー代入演算子
```
## * 何をするか
### 1. 自己代入チェック(自身への代入を防ぐ)
### 2. ```other```のメンバを自分自身へコピー
### 3. ```return *this;```で自分自身への参照を返して連鎖代入```(a=b=c;)```を可能にする
# まとめ
| | コピーコンストラクタ | コピー代入演算子|
|--- |---------------|------------------|
呼ばれるタイミング | オブジェクトの生成と同時 | 既に存在するオブジェクトへの代入
返り値 | なし（コンストラクタなので） | クラス名&（自分自身への参照）
実装上の注意 | メンバ初期化リストでコピーすると効率的 | 自己代入チェックと、既存状態の上書き
